# Security headers - relaxed for modern React/Vite/WebGL apps
# (Individual headers are now in main nginx.conf for better control)

# SSL security settings
ssl_stapling on;
ssl_stapling_verify on;
resolver 8.8.8.8 8.8.4.4 valid=300s;
resolver_timeout 5s;

# Rate limiting zones
limit_req_zone $binary_remote_addr zone=api_limit:10m rate=100r/s;
limit_req_zone $binary_remote_addr zone=general_limit:10m rate=200r/s;
limit_conn_zone $binary_remote_addr zone=conn_limit:10m;

# Apply rate limits to API endpoints
limit_req zone=api_limit burst=50 nodelay;
limit_conn conn_limit 50;
